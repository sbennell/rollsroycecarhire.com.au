{{ define "main" }}
  {{ partial "page-header" . }}

  <!-- Main Content and Contact Form Side-by-Side -->
  <section class="section-sm">
    <div class="container">
      <div class="row justify-center">
        <!-- Contact Information on the Left, Centered -->
        <div class="lg:col-5 mb-8 text-center">
          <h2>Contact Information</h2>
          <p><strong>Address:</strong> 360 Elgar Rd, Box Hill, Vic 3129</p>
          <p><strong>Mail:</strong> <a href="mailto:info@alwaysclassiccars.com.au">info@alwaysclassiccars.com.au</a></p>
          <p><strong>Phone:</strong> 03 9898 2889</p>
          <p><strong>Phone:</strong> 03 9899 9100</p>
          <p><strong>Hours:</strong> Open by Appointment</p>
        </div>


        <!-- Contact Form on the Right, Text Left-Aligned -->
        <div class="lg:col-5">
          <form action="{{ site.Params.contact_form_action | safeURL }}/send-email.php" method="POST" id="contact-form">
            <!-- Hidden Fields Filled by JS -->
            <input name="utm" type="hidden" readonly="readonly">
            <input name="return_to" type="hidden" readonly="readonly">
            <input name="template" value="{{ .Params.template | default "default" }}" type="hidden" readonly="readonly">
            <input name="address" hidden>

            <div class="mb-6 text-left">
              <label for="name" class="form-label">Full Name <span class="text-red-500">*</span></label>
              <input id="name" name="name" class="form-input" placeholder="John Doe" type="text" required>
            </div>

            <div class="mb-6 text-left">
              <label for="phone" class="form-label">Phone <span class="text-red-500">*</span></label>
              <input id="phone" name="phone" class="form-input" placeholder="123-456-7890" type="tel">
            </div>

            <div class="mb-6 text-left">
              <label for="email" class="form-label">Working Mail <span class="text-red-500">*</span></label>
              <input id="email" name="email" class="form-input" placeholder="john.doe@email.com" type="email" required>
            </div>

            <div class="mb-6 text-left">
              <label for="event-type" class="form-label">Event Type <span class="text-red-500">*</span></label>
              <select id="event-type" name="event-type" class="form-input">
                <option value="Wedding">Wedding</option>
                <option value="Birthday">Birthday</option>
                <option value="School Formals">School Formals</option>
                <option value="Debutante Balls">Debutante Balls</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="mb-6 text-left">
              <label for="event-date" class="form-label">Date of Event <span class="text-red-500">*</span></label>
              <input id="event-date" name="event-date" class="form-input" type="date" required>
            </div>

            <div class="mb-6 text-left">
              <label for="pickup-location" class="form-label">Pickup Location</label>
              <input id="pickup-location" name="pickup-location" class="form-input" placeholder="123 Main St" type="text">
            </div>

            <div class="mb-6 text-left">
              <label for="dropoff-location" class="form-label">Drop-off Location</label>
              <input id="dropoff-location" name="dropoff-location" class="form-input" placeholder="456 Elm St" type="text">
            </div>

            <div class="mb-6 text-left">
              <label for="message" class="form-label">Anything else?</label>
              <textarea id="message" name="message" class="form-input" placeholder="Message goes here..." rows="8"></textarea>
            </div>

            <!-- Hidden Fields Filled by JS -->
            <fieldset class="rounded border border-dark-subtle mt-3 p-3 d-none">
              <div class="row">
                <div class="col-md-4">
                  <label for="os" class="form-label">OS</label>
                 <input name="os" id="os" type="text" readonly="readonly" class="form-control" required>
                </div>
                <div class="col-md-4">
                  <label for="browser" class="form-label">Browser</label>
                  <input name="browser" id="browser" type="text" readonly="readonly" class="form-control" required>
                </div>
                <div class="col-md-4">
                  <label for="lang" class="form-label">Language</label>
                  <input name="lang" id="lang" type="text" readonly="readonly" class="form-control" required>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-md-4">
                  <label for="ip" class="form-label">Public IP</label>
                  <input name="ip" id="ip" type="text" readonly="readonly" class="form-control" required>
                </div>
                <div class="col-md-4">
                  <label for="isp" class="form-label">ISP</label>
                  <input name="isp" id="isp" type="text" readonly="readonly" class="form-control" required>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-md-4">
                  <label for="country" class="form-label">Country</label>
                  <input name="country" id="country" type="text" readonly="readonly" class="form-control" required>
                </div>
              </div>
            </fieldset>

            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>

        <!-- JavaScript for User Agent Integration -->
        <script src="{{site.Params.contact_form_action | safeURL}}/js/user-agent.min.js"></script>
        <script>
          window.addEventListener('DOMContentLoaded', () => {
            validate_contact("{{site.Params.contact_form_action | safeURL}}/user-agent.php");
          });
        </script>
      </div>
    </div>
  </section>

  <!-- Subscription Form -->
  {{ with site.Params.subscription }}
    {{ if .enable }}
      <section class="section-sm text-center">
        <div class="container">
          <form action="{{ .mailchimp_form_action | safeURL }}" method="post" id="mc-embedded-subscribe-form" novalidate>
            <div class="input-group w-75 mx-auto mb-3">
              <input type="email" name="EMAIL" placeholder="Email" class="form-control required email mce_inline_error" id="mce-EMAIL" required>
              <button class="input-group-text" name="subscribe" id="mc-embedded-subscribe">{{ .button_label }}</button>
            </div>
            <input type="hidden" name="EMAILTYPE" value="html">
            <div style="position:absolute;left:-5000px" aria-hidden="true">
              <input type="text" name="{{ .name }}" tabindex="-1">
            </div>
          </form>
          <div id="mce-responses" class="clear">
            <div class="response text-white" id="mce-error-response" style="display:none"></div>
            <div class="response text-white" id="mce-success-response" style="display:none"></div>
          </div>
          <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script>
        </div>
      </section>
    {{ end }}
  {{ end }}

  <!-- Google Map -->
  {{ with site.Params.google_map }}
    {{ if .enable }}
      <section class="section-sm">
        <div class="container">
          <div id="map" style="height: 400px;" data-latitude="{{ .map_latitude }}" data-longitude="{{ .map_longitude }}" data-marker="{{ .map_marker | relURL }}" data-marker-name="{{ site.Title }}"></div>
        </div>
      </section>
    {{ end }}
  {{ end }}

  <!-- Load Google Maps Script if Enabled -->
  {{ if site.Params.google_map.enable }}
    {{ $gmap := resources.Get "plugins/maps/google-map.js" }}
    <script defer src="{{ $gmap.RelPermalink }}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ site.Params.google_map.map_api_key }}&libraries=places"></script>
  {{ end }}

{{ end }}
